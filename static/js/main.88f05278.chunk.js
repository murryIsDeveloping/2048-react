(this["webpackJsonp2048-reaction"]=this["webpackJsonp2048-reaction"]||[]).push([[0],{125:function(e,t,n){e.exports=n(233)},130:function(e,t,n){},131:function(e,t,n){},138:function(e,t){},140:function(e,t){},151:function(e,t){},153:function(e,t){},178:function(e,t){},180:function(e,t){},181:function(e,t){},187:function(e,t){},189:function(e,t){},207:function(e,t){},209:function(e,t){},221:function(e,t){},224:function(e,t){},233:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(39),i=n.n(o),c=(n(130),n(131),n(4)),l=n(22),s=n(23),u=n(45),m=n(44),h=function(e){var t="tile v-".concat(e.value);return r.a.createElement("div",{className:"tile-wrapper"},r.a.createElement("div",{className:t},r.a.createElement("span",null,e.value)))},d=n(121),f=n(13),v=function(e){return Math.floor(Math.random()*e)},g=function(e){if(function(e){return e.every((function(e){return e.every((function(e){return""!==e}))}))}(e)){for(var t=0;t<e.length-1;t++)for(var n=0;n<e.length;n++)if(e[t][n]===e[t+1][n])return!1;for(var a=0;a<e.length;a++)for(var r=0;r<e.length-1;r++)if(e[a][r]===e[a][r+1])return!1;return!0}},b=function e(t){var n=t.length,a=[v(n),v(n)],r=a[0],o=a[1];return""!==t[r][o]?e(t):t.map((function(e,t){return e.map((function(e,n){return t===r&&n===o?Math.random()>.3?"2":"4":e}))}))},E=function(e){var t=Array(e).fill(Array(e).fill(""));return b(b(t))},p=function e(t,n){return 0===t?n:e(t-1,n[0].map((function(e,t){return n.map((function(e){return e[t]})).reverse()})))},w=function(e){var t=0,n=[];return e.forEach((function(a){var r=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t.length<=1)return{tiles:[].concat(Object(f.a)(n),Object(f.a)(t)),score:a};var r=Object(d.a)(t),o=r[0],i=r[1],c=r.slice(2);return o===i?e(c,[].concat(Object(f.a)(n),[(2*o).toString()]),a+Number(o)):e([i].concat(Object(f.a)(c)),[].concat(Object(f.a)(n),[o]),a)}(a.filter((function(e){return""!==e}))),o=r.tiles,i=r.score;t+=i;var c=e.length-o.length;n.push([].concat(Object(f.a)(o),Object(f.a)(Array(c).fill(""))))})),{tiles:n,score:t}},O=function(e){return function(t){if(0===e)return w(t);var n=w(p(e,t)),a=n.tiles,r=n.score;return{tiles:p(4-e,a),score:r}}},y=O(0),j=O(1),N=O(2),k=O(3),S=function(e,t){var n,a,r="ArrowLeft"===t||"LEFT"===t?y(e):"ArrowRight"===t||"RIGHT"===t?N(e):"ArrowDown"===t||"DOWN"===t?j(e):"ArrowUp"===t||"UP"===t?k(e):{tiles:e,score:0};return n=r.tiles,a=e,JSON.stringify(n)===JSON.stringify(a)?r:{score:r.score,tiles:b(r.tiles)}},C=function(e){return r.a.createElement("div",{className:"plus-minus"},r.a.createElement("div",{className:"plus-minus-btn",onClick:function(){return e.valueChanged(e.value-1)}},"<"),r.a.createElement("span",{className:"plus-minus-value"},e.value),r.a.createElement("div",{className:"plus-minus-btn",onClick:function(){return e.valueChanged(e.value+1)}},">"))},M=function(e){return r.a.createElement("div",{className:"toggle"+(e.show?" active":""),onClick:e.onToggle},r.a.createElement("div",{className:"inner-toggle"}))},z=n(124),D=n(122),T=n.n(D),H=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).videoRef=r.a.createRef(),e.intervalSub=null,e.handModel=null,e.state={camera:!1,hand:null,show:!1,loading:!1},e.hasGetUserMedia=function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(this.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!0,camera:!0})})),this.loadHandModel())}},{key:"loadHandModel",value:function(){var e=this;console.log("loading hand model..."),z.a({flipHorizontal:!0,maxNumBoxes:1,iouThreshold:.5,scoreThreshold:.85}).then((function(t){e.handModel=t,e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!1})})),console.log("loaded hand model")}))}},{key:"toggleHandControl",value:function(){var e=this;this.state.loading||(this.state.show?(this.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{hand:null,show:!1})})),this.intervalSub&&(clearInterval(this.intervalSub),this.intervalSub=null)):(this.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{show:!0})})),navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){e.videoRef.current&&(e.videoRef.current.srcObject=t,e.detect())}))))}},{key:"handControl",value:function(e){if(this.state.hand&&e){var t=this.state.hand,n=e.bbox,a=t[0]-n[0],r=t[1]-n[1];Math.abs(a)>Math.abs(r)&&Math.abs(a)>30?this.props.merge(a>0?"LEFT":"RIGHT"):Math.abs(r)>15&&this.props.merge(r>0?"UP":"DOWN")}}},{key:"detect",value:function(){var e=this;this.intervalSub=setInterval((function(){var t=document.getElementById("videoElement");if(!t||!e.handModel)return console.log("Happened"),e.setState((function(e){return Object(c.a)({},e)}));e.handModel.detect(t).then((function(t){e.handControl(t[0]),e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{hand:t.length?t[0].bbox:e.hand})}))})).catch((function(e){console.log(e)}))}),600)}},{key:"render",value:function(){var e=this;return this.state.camera&&!this.state.show?r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{show:this.state.show,onToggle:function(){return e.toggleHandControl()}}),this.state.loading?r.a.createElement("span",{className:"loading-model"},"Loading..."):null):this.state.show?r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{show:this.state.show,onToggle:function(){return e.toggleHandControl()}}),r.a.createElement(T.a,null,r.a.createElement("div",{className:"video-wrapper",draggable:!0},r.a.createElement("video",{width:280,height:200,autoPlay:!0,id:"videoElement",ref:this.videoRef})))):null}}]),n}(r.a.Component),I=function(e){return r.a.createElement("div",{className:"toolbar"},r.a.createElement("div",{className:"toolbar-row"},r.a.createElement("h2",{className:"title"},"2048")," ",r.a.createElement("button",{onClick:e.reset},"\u21ba")),r.a.createElement("div",{className:"toolbar-row"},r.a.createElement("div",{className:"toolbar-controller"},r.a.createElement("span",null,"Change Grid Size:"),r.a.createElement(C,{value:e.size,valueChanged:e.sizeCtl})),r.a.createElement("div",{className:"toolbar-controller"},r.a.createElement("span",null,"Use Hand Motion Controls:"),r.a.createElement(H,{merge:e.merge}))))},R=n(123),U=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={size:4,tiles:E(4),score:0,gameover:!1},e.reset=function(){e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{tiles:E(e.size),score:0,gameover:!1})}))},e.sizeCtl=function(t){t>=3&&t<=8&&e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{size:t,tiles:E(t),score:0,gameover:!1})}))},e.merge=function(t){var n=e.state.tiles,a=S(n,t),r=a.tiles,o=a.score;e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{score:e.score+o,tiles:r,gameover:g(r)})}))},e}return Object(s.a)(n,[{key:"resetBtn",value:function(){return r.a.createElement("button",{onClick:this.reset},"\u21ba")}},{key:"render",value:function(){var e=this,t="tiles g-".concat(this.state.size);return r.a.createElement("div",{className:"board",tabIndex:"0",onKeyDown:function(t){return e.merge(t.key)}},r.a.createElement(I,{reset:this.reset,sizeCtl:this.sizeCtl,size:this.state.size,merge:this.merge}),r.a.createElement("h3",{className:"score"},"Score: ",this.state.score),this.state.gameover?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Game Over!"),r.a.createElement("button",{class:"red",onClick:this.reset},"\u21ba")):null,r.a.createElement(R.a,{onSwipedLeft:function(t){return e.merge("LEFT")},onSwipedRight:function(t){return e.merge("RIGHT")},onSwipedUp:function(t){return e.merge("UP")},onSwipedDown:function(t){return e.merge("DOWN")}},r.a.createElement("div",{className:t},this.state.tiles.map((function(e,t){return e.map((function(e,n){var a="".concat(t,"-").concat(n);return r.a.createElement(h,{value:e,key:a})}))})))),r.a.createElement("p",{className:"directions"},r.a.createElement("strong",null,"Merge tiles together to gain points."),r.a.createElement("br",null),"If your on a computer use the arrow keys.",r.a.createElement("br",null),"If on a mobile swipe the tiles.",r.a.createElement("br",null)," If your feeling really brave toggle the"," ",r.a.createElement("strong",null,'"use hand motion controller" '),"and try to play by waving your hands side to side and using them as controls. The hand controls may take a few seconds or minutes before they can be enabled as required packages need to be loaded."))}}]),n}(r.a.Component);var A=function(){return r.a.createElement(U,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.88f05278.chunk.js.map